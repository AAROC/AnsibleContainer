# We need to test :
# Client access to the repositories (for various targets)
# build-slave configuration
sudo: required

language: bash

env:
  - OS=u1404
  - OS=u1610
  - OS=centos6
  - OS=centos7
# 
# matrix:
#   allow_failures:
#     - env: OS=centos7
services:
  - docker

before_install:
  - git clone --recursive https://github.com/AAROC/DevOps

# Build the container
install:
  - docker build -t ansiblecontainer -f Dockerfile.$OS .
#  - docker run -d aaroc/code-rade-build-slave:u1404 /bin/sh -c "echo hi"
script:
  - docker run -t -P ansiblecontainer ansible all -c local -m setup
# check that ansible is working

after_success:

after_failure:

notifications:
  slack:
    rooms:
      - africa-arabia-roc:qn956vBmV7VIyJ1Xod4Cmnd5#coderade
